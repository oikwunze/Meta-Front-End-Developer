if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("PolarisCommentLikeListsActions",["PolarisCommentLikeListsActionTypes","PolarisCommentLikeListsState","PolarisPaginationUtils","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h="5f0b1f6281e72053cbc07909c8d154ae",i=24,j=1;function a(){return d("PolarisPaginationUtils").generatePaginationActionCreators({pageSize:i,pagesToPreload:j,getState:function(a,b){return a.commentLikeLists.get(b,d("PolarisCommentLikeListsState").EMPTY_LISTS).pagination},queryId:h,queryParams:function(a){return{comment_id:a}},onUpdate:function(a,b,e){b=b&&c("nullthrows")(b.comment).edge_liked_by;return{type:d("PolarisCommentLikeListsActionTypes").COMMENT_LIKE_LISTS_REQUEST_UPDATED,fetch:a,commentId:e,count:b==null?void 0:b.count,users:((b==null?void 0:b.edges)||[]).map(function(a){return a.node}),pageInfo:b==null?void 0:b.page_info}},onError:function(a,b,c){return{type:d("PolarisCommentLikeListsActionTypes").COMMENT_LIKE_LISTS__REQUEST_FAILED,fetch:b,commentId:c}}})}b=a();e=b;f=b.first;a=b.next;g._actionCreators=e;g.requestCommentLikes=f;g.requestNextCommentLikes=a}),98);
__d("PolarisPostRemoveCommentsSelectors",["reselect"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.postRemoveComments}b=d("reselect").createSelector(a,function(a){a=a.isVisible;return a});g.getPostRemoveCommentsIsVisible=b}),98);
__d("PolarisThreadedCommentSelectors",["PolarisPaginationUtils","PolariscreateSelectorWithArg","immutable-4.0.0-rc.9","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return!a.deleted&&!a.didReportAsSpam}b=c("PolariscreateSelectorWithArg")(function(a){return a.posts.byId},function(a){return a.comments.byId},function(a){return a.threadedComments.parentByPostId},function(a,b,e){return function(f){var g=e.get(f);f=a.get(f);if(!g||!f)return d("immutable-4.0.0-rc.9").List();var i=g.commentIds;g=d("PolarisPaginationUtils").getVisibleCount(g.pagination);f=f.hasRankedComments?0:i.count()-g;return i.map(function(a){return c("nullthrows")(b.get(a))}).slice(f,f+g).filter(function(a){return h(a)})}});e=c("PolariscreateSelectorWithArg")(function(a){return a.comments.byId},function(a){return a.threadedComments.childByParentId},function(a,b){return function(e){e=c("nullthrows")(b.get(e));var f=e.commentIds;e=e.pagination;f=f.map(function(b){return c("nullthrows")(a.get(b))});e=f.count()-d("PolarisPaginationUtils").getVisibleCount(e);var g=f.slice(e,f.count()).filter(function(a){return h(a)});f=f.slice(0,e).filter(function(a){return h(a)});e=f.map(function(a){return a.id});return{visibleChildComments:g,remainingCachedShowableChildCommentIds:e}}});f=c("PolariscreateSelectorWithArg")(function(a){return a.comments.byId},function(a){return a.threadedComments.childByParentId},function(a,b){return function(a){a=c("nullthrows")(b.get(a));return a.count||0}});function a(a,b){return!!((a=a.threadedComments.initialCommentsLoading)==null?void 0:a.get(b))}g.selectVisibleParentCommentsForPostId=b;g.selectChildCommentsForParentIdSplitByVisibility=e;g.getTotalChildCommentCountForParentId=f;g.getThreadedCommentsLoading=a}),98);
__d("PolarisIgWellbeingRestrictManageCommentFalcoEvent",["PolarisFalcoLogger"],(function(a,b,c,d,e,f,g){"use strict";var h={falco:!0,pigeon:!1};a=function(){function a(){}a.log=function(a){var b=a.action,c=a.actorIgUserid,d=a.commentId,e=a.commentThreadId,f=a.parentMediaId,g=a.step;this.$1(function(){return{action:b,actor_ig_userid:parseInt(c,10),comment_id:d?parseInt(d,10):void 0,entrypoint:"comment",parent_comment_id:e===d?void 0:parseInt(e,10),parent_media_id:parseInt(f,10),step:g}})};a.$1=function(a){d("PolarisFalcoLogger").FalcoLogger.log("ig_wellbeing_restrict_manage_comment",a(),{},h)};return a}();g["default"]=a}),98);
__d("PolarisApproveCommentDialog.react",["fbt","IGCoreDialog","PolarisCommentActions","PolarisGenericStrings","PolarisIgWellbeingRestrictManageCommentFalcoEvent","react","react-redux-wwwig"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=h._("Approve"),k=h._("Approve This Comment?");function l(a){return h._("Only you and {username} can see this comment. If you approve it, it'll be visible to everyone.",[h._param("username",a)])}b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=d.props,b=a.commentId,e=a.commentOwnerId,f=a.commentThreadId;a=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:e,commentId:b,commentThreadId:f,parentMediaId:a,step:"approval_page_approve_this_comment"});d.props.onApproveClick();d.props.onClose()},d.$2=function(){var a=d.props,b=a.commentId,e=a.commentOwnerId,f=a.commentThreadId;a=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:e,commentId:b,commentThreadId:f,parentMediaId:a,step:"approval_page_cancel"});d.props.onClose()},b)||babelHelpers.assertThisInitialized(d)}var e=b.prototype;e.render=function(){var a=this.props.commentOwnerUsername;return i.jsxs(d("IGCoreDialog").IGCoreDialog,{body:l(a),onModalClose:this.props.onClose,title:k,children:[i.jsx(d("IGCoreDialog").IGCoreDialogItem,{color:"ig-primary-button",onClick:this.$1,children:j}),i.jsx(d("IGCoreDialog").IGCoreDialogItem,{onClick:this.$2,children:d("PolarisGenericStrings").CANCEL_TEXT})]})};return b}(i.Component);function a(a,b){return{onApproveClick:function(){a(d("PolarisCommentActions").approveRestrictedComment(b.commentId))}}}e=d("react-redux-wwwig").connect(null,a)(b);g.APPROVE_COMMENT_CTA=j;g.ApproveCommentDialog=e}),98);
__d("PolarisCommentOptionsDialog.react",["fbt","IGCoreDialog","PolarisFRXReportModal.react","PolarisGenericStrings","PolarisReportConstants","PolarisReportUnderLawDialogItem.react","PolarisisUserLoggedIn","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useState;function a(a){var b=a.canDeleteComment,e=a.canPinComment;e=e===void 0?!1:e;var f=a.commentId,g=a.commentOwnerAvatar,k=a.commentOwnerId,l=a.commentOwnerUsername,m=a.mediaOwnerId,n=a.onClose,o=a.onDelete;a=a.onPin;var p=j(!1),q=p[0],r=p[1];p=function(){r(!0)};var s=function(){n(),r(!1)};if(q)return i.jsx(c("PolarisFRXReportModal.react"),{frxLocation:d("PolarisReportConstants").FRXLocation.COMMENTS,frxObjectType:d("PolarisReportConstants").FRXObjectType.COMMENT,onClose:s,reportedObjectID:f,reportedOwner:{id:k,username:l,profilePicURL:g},useSimpleBlockModalWithoutRefresh:k===m});q=d("PolarisisUserLoggedIn").isUserLoggedIn()?i.jsx(d("IGCoreDialog").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:p,children:h._("Report")}):i.jsx(d("PolarisReportUnderLawDialogItem.react").ReportUnderLawDialogItem,{contentId:f});return i.jsxs(d("IGCoreDialog").IGCoreDialog,{onModalClose:s,children:[q,e&&i.jsx(d("IGCoreDialog").IGCoreDialogItem,{color:"ig-secondary-button",onClick:a,children:h._("Pin comment")}),b&&i.jsx(d("IGCoreDialog").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:o,children:h._("Delete")}),i.jsx(d("IGCoreDialog").IGCoreDialogItem,{onClick:s,children:d("PolarisGenericStrings").CANCEL_TEXT})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisUnhideCommentDialog.react",["fbt","IGCoreDialog","PolarisCommentActions","PolarisGenericStrings","react","react-redux-wwwig"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.commentId;a.commentOwnerId;a.commentThreadId;var c=a.onClose,e=a.postId,f=d("react-redux-wwwig").useDispatch();a=function(){f(d("PolarisCommentActions").unhideCoveredComment(b,e)),c()};var g=function(){c()};return i.jsxs(d("IGCoreDialog").IGCoreDialog,{onModalClose:g,title:"Unhide comment?",children:[i.jsx(d("IGCoreDialog").IGCoreDialogItem,{color:"ig-secondary-button",onClick:a,children:h._("Unhide")}),i.jsx(d("IGCoreDialog").IGCoreDialogItem,{onClick:g,children:d("PolarisGenericStrings").CANCEL_TEXT})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostComment.react",["cx","fbt","FastLink","PolarisApproveCommentDialog.react","PolarisCommentActions","PolarisCommentLikeListsActions","PolarisCommentOptionsDialog.react","PolarisCommentTranslationPrompt.react","PolarisConfig","PolarisDoubleTappable","PolarisEngagementLogger","PolarisIGCoreBox","PolarisIGCoreButton","PolarisIGCoreConstants","PolarisIGCoreMoreHorizontalPanoOutlineIcon","PolarisIGCoreSVGIconButton","PolarisIGCoreText","PolarisIGCoreVerifiedBadge","PolarisIgWellbeingRestrictManageCommentFalcoEvent","PolarisLikeButton.react","PolarisLinkBuilder","PolarisNavigationActions","PolarisPendingCommentActions","PolarisPostCaptionTranslationPrompt.react","PolarisPostStrings","PolarisPostVariants","PolarisTimestamp.react","PolarisTruncatedText.react","PolarisUA","PolarisUnhideCommentDialog.react","PolarisUserAvatarWithStories.react","PolarisUserHoverCard.react","PolarisUserText.react","PolarisViewpointReact.react","PolarispostSelectors","PolarisuserSelectors","gkx","joinClasses","nullthrows","react","react-redux-wwwig"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=750;function l(a){var b=a.parentProps,e=b.commentOwnerId,f=b.commentOwnerUsername,g=b.isAuthorVerified,h=b.isCaption,i=b.isRestrictedPending,k=b.postOwnerIsUnpublished;b=b.showRichComment;a=i&&!a.parentState.showRestrictedContent;var l=h?"h2":"h3";if(a)return j.jsx(c("PolarisIGCoreBox"),{marginBottom:1,children:j.jsx(c("PolarisIGCoreText").Body,{color:"ig-tertiary-text",weight:"semibold",children:d("PolarisPostStrings").RESTRICTED_ACCOUNT_HEADER_TEXT})});else if(!h||!k)return j.jsxs(l,{className:"_a9zc"+(i===!0?" _a9zd":""),children:[j.jsx(c("PolarisIGCoreBox"),{marginEnd:1,children:j.jsx(c("PolarisUserHoverCard.react"),{display:"inline",triggerAnalyticsContext:"post_commenter",userId:e,children:j.jsx(c("PolarisIGCoreButton"),{borderless:!0,color:"ig-secondary-button",href:d("PolarisLinkBuilder").buildUserLink(c("nullthrows")(f)),children:c("nullthrows")(f)})})}),b&&g&&j.jsx(c("PolarisIGCoreBox"),{marginEnd:1,children:j.jsx(c("PolarisIGCoreVerifiedBadge"),{size:"small"})})]});return null}l.displayName=l.name+" [from "+f.id+"]";function m(a){a=a.parentProps;var b=a.captionCreatedAt,e=a.commentThreadId,f=a.disableTimestampNav,g=a.id,h=a.isCaption,i=a.isEdited,k=a.postShortcode;a=a.postedAt;h=j.jsx(c("PolarisTimestamp.react"),{className:"_a9ze _a9zf",value:h&&i&&b!=null?b:a});if(k&&g){i=e&&e!==g?d("PolarisLinkBuilder").buildReplyPermalink(k,e,g,d("PolarisUA").isMobile()):d("PolarisLinkBuilder").buildCommentPermalink(k,g,d("PolarisUA").isMobile());b=f===!0?function(a){return a.preventDefault()}:void 0;h=j.jsx(c("FastLink"),{className:"_a9zg",href:i,onClick:b,children:h})}return h}h=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state={showApproveCommentDialog:!1,showCommentOptionsDialog:!1,showRestrictedContent:!1,showUnhideDialog:!1},e.$3=function(){e.setState({showCommentOptionsDialog:!0})},e.$4=function(){if(!d("PolarisUA").isMobile()||!e.props.showRichComment||e.props.isCaption)return;e.$1=window.setTimeout(e.$3,k)},e.$2=function(){window.clearTimeout(e.$1)},e.$5=function(){e.setState({showCommentOptionsDialog:!1})},e.$6=function(){e.setState({showCommentOptionsDialog:!1}),e.props.onDeleteComment()},e.$7=function(){var a=e.props,b=a.id;a=a.onDeleteCommentClick;a&&a(c("nullthrows")(b))},e.$8=function(a){var b=e.props,c=b.onLikeComment;b=b.onUnlikeComment;a?c():b()},e.$9=function(){var a=e.props,b=a.isRestrictedPending,c=a.likedByViewer;a=a.onLikeComment;!c&&!b&&a()},e.$10=function(){var a=e.props,b=a.code,f=a.fetchCommentLikes,g=a.id,h=a.loggedIn,i=a.onLikeCountClick,j=a.onLoggedOutIntentClick;a=a.onLoggedOutIntentClickLoginModal;if(h)i&&(f(),i(c("nullthrows")(g)));else{h="post_comment_like_count";d("PolarisUA").isDesktop()?a(d("PolarisLinkBuilder").buildMediaLink(c("nullthrows")(b)),h):j(h)}},e.$11=function(a){var b=e.props,f=b.analyticsContext,g=b.commentOwnerId,h=b.commentThreadId,i=b.id,j=b.isRestrictedPending,k=b.mediaType,l=b.postId,m=b.postOwnerId;b=b.viewerId;switch(a.state){case"entered":if(i!=null&&b!=null){d("PolarisEngagementLogger").logCommentImpression({commentId:i,commentAuthorId:g,commentThreadId:h,containerModule:f,mediaId:l,mediaAuthorId:m,mediaType:k});j&&c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"impression",actorIgUserid:g,commentId:i,commentThreadId:h,parentMediaId:l,step:"pending_comment"});return}}},e.$12=function(){var a=e.props,b=a.code,f=a.loggedIn,g=a.onLoggedOutIntentClick,h=a.onLoggedOutIntentClickLoginModal;a=a.onReplyClick;if(f)a();else{f="post_comment_reply";d("PolarisUA").isDesktop()?h(d("PolarisLinkBuilder").buildMediaLink(c("nullthrows")(b)),f):g(f)}},e.$13=function(){var a=e.props,b=a.commentOwnerId,d=a.commentThreadId,f=a.id;a=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:f,commentThreadId:d,parentMediaId:a,step:"pending_comment_see_hidden"});e.setState({showRestrictedContent:!0})},e.$14=function(){var a=e.props,b=a.commentOwnerId,d=a.commentThreadId,f=a.id;a=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:f,commentThreadId:d,parentMediaId:a,step:"pending_comment_approve"});e.setState({showApproveCommentDialog:!0})},e.$15=function(){e.setState({showApproveCommentDialog:!1})},e.$16=function(){e.setState({showUnhideDialog:!1})},e.$17=function(){var a=e.props,b=a.commentOwnerId,d=a.commentThreadId,f=a.id;a=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:f,commentThreadId:d,parentMediaId:a,step:e.state.showRestrictedContent?"pending_comment_delete":"pending_comment_delete_hidden"});e.$7()},e.$18=function(){e.setState({showUnhideDialog:!0})},e.$19=function(){var a=e.props,b=a.code,f=a.id,g=a.likeCount;a=a.loggedIn;if(!g)return null;var h=g.toLocaleString(),k=i._("{like count} like",[i._param("like count",h)]);h=i._("{like count} likes",[i._param("like count",h)]);k=g===1?k:h;return g>0&&(d("PolarisUA").isDesktop()||!a?j.jsx("button",{className:"_a9ze",onClick:e.$10,children:j.jsx(c("PolarisIGCoreText"),{color:"ig-secondary-text",size:"footnote",weight:"semibold",zeroMargin:!0,children:k})}):j.jsx(c("FastLink"),{className:"_a9ze",href:"/p/"+c("nullthrows")(b)+"/c/"+c("nullthrows")(f)+"/liked_by/",children:k}))},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.componentWillUnmount=function(){this.$2()};e.render=function(){var a=this,b=this.props,e=b.className,f=b.commentOwnerAvatar,g=b.commentOwnerId,h=b.commentOwnerUsername,i=b.commentThreadId,k=b.commentingDisabledForViewer,n=b.customPaddingStyle,o=b.hideUserAvatar,p=b.id,q=b.isCaption,r=b.isCovered,s=b.isEdited,t=b.isPermalinkedComment,u=b.isRestrictedPending,v=b.likedByViewer,w=b.postId,x=b.postOwnerId,y=b.postOwnerIsUnpublished,z=b.reducedAvatarMargin,A=b.showCommentOptionsInline,B=b.showRemoveIcon,C=b.showRichComment,D=b.translation,E=b.variant,F=b.viewerId,G=this.props.text.toString();(D==null?void 0:D.showTranslatedText)===!0&&D.translatedText!=null&&(G=D.translatedText);var H=!q&&F&&(F===g||x===F),I=H&&B&&!C,J=!q&&!!F&&!I&&!u;b=d("PolarisConfig").isNetzDGEligible()&&t;var K=b||C&&!d("PolarisUA").isMobile()&&!q&&F!=null,L=E===d("PolarisPostVariants").VARIANTS.feed?c("PolarisTruncatedText.react"):c("PolarisUserText.react"),M=!!q||!J&&!H,N=u&&!this.state.showRestrictedContent,O=u&&this.state.showRestrictedContent,P=j.jsx("div",{className:A===!0?"_a9ze":"",children:j.jsx("div",{className:(A!==!0?"_a9zh":"")+(A===!0?" _a9zi":""),children:j.jsx(c("PolarisIGCoreSVGIconButton"),{onClick:this.$3,children:j.jsx(c("PolarisIGCoreBox"),{alignItems:"center",height:24,justifyContent:"center",width:24,children:j.jsx(c("PolarisIGCoreMoreHorizontalPanoOutlineIcon"),{alt:d("PolarisPostStrings").COMMENT_OPTIONS_ALT_TEXT,color:"ig-secondary-text"})})})})});return j.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:this.$11,id:G.replace(" ","-"),children:function(b){return j.jsxs(d("PolarisDoubleTappable").DoubleTappable,{onDoubleClick:a.$9,role:"button",children:[j.jsx("li",{className:c("joinClasses")((C?"_a9zj":"")+(n==="compact"?" _a9zk":"")+" _a9zl",e),onMouseDown:a.$4,onMouseUp:a.$2,onTouchEnd:a.$2,onTouchMove:a.$2,onTouchStart:a.$4,ref:b,children:j.jsxs("div",{className:"_a9zm",children:[j.jsxs("div",{className:(M?"_a9zn":"")+" _a9zo",children:[C&&!o&&j.jsx(c("PolarisUserHoverCard.react"),{display:"block",triggerAnalyticsContext:"post_commenter_avatar",userId:g,children:j.jsx(c("PolarisUserAvatarWithStories.react"),{className:"_a9zp"+(z===!0?" _a9zq":"")+(u===!0?" _a9zd":""),isLink:!y,profilePictureUrl:f,size:c("PolarisIGCoreConstants").AVATAR_SIZES.small,storyEntrypoint:"post_comment",username:h})}),j.jsxs("div",{className:"_a9zr",children:[j.jsx(l,{parentProps:a.props,parentState:a.state}),!N&&j.jsx("div",{className:"_a9zs"+(u===!0?" _a9zd":""),"data-testid":void 0,children:j.jsx(L,{display:"inline",size:"body",value:G})}),C&&j.jsx(c("PolarisIGCoreBox"),{marginBottom:1,marginTop:2,children:j.jsxs(c("PolarisIGCoreText").Body2,{color:"ig-secondary-text",children:[q&&s&&j.jsxs(j.Fragment,{children:[d("PolarisPostStrings").CAPTION_EDITED_TEXT,"\xa0\xb7\xa0"]}),j.jsx(m,{parentProps:a.props}),q&&j.jsx(c("PolarisIGCoreBox"),{display:"inlineBlock",children:j.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{postId:w})}),!q&&!u&&j.jsxs(j.Fragment,{children:[a.$19(),k!==!0&&j.jsx("button",{className:"_a9ze",onClick:a.$12,children:j.jsx(c("PolarisIGCoreText"),{color:"ig-secondary-text",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").REPLY_TEXT})}),c("gkx")("3006")&&r&&x===F&&j.jsx("button",{className:"_a9ze",onClick:a.$18,children:j.jsx(c("PolarisIGCoreText"),{color:"ig-secondary-text",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").UNHIDE_TEXT})}),p&&j.jsx(c("PolarisIGCoreBox"),{display:"inlineBlock",marginEnd:2,children:j.jsx(c("PolarisCommentTranslationPrompt.react"),{commentId:p})}),K&&A===!0&&P]}),N&&j.jsx("button",{className:"_a9ze",onClick:a.$13,children:j.jsx(c("PolarisIGCoreText"),{color:"ig-secondary-text",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").RESTRICT_SEE_COMMENT_TEXT})}),O&&j.jsx("button",{className:"_a9ze",onClick:a.$14,children:j.jsx(c("PolarisIGCoreText"),{color:"ig-secondary-text",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisApproveCommentDialog.react").APPROVE_COMMENT_CTA})}),u&&j.jsx("button",{className:"_a9ze",onClick:a.$17,children:j.jsx(c("PolarisIGCoreText"),{color:"ig-secondary-text",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").RESTRICT_DELETE_COMMENT_TEXT})})]})})]})]}),I&&j.jsx("button",{className:"_a9zt",onClick:a.$7,title:d("PolarisPostStrings").DELETE_COMMENT_TEXT,children:j.jsx(c("PolarisIGCoreText"),{color:"ig-tertiary-text",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").DELETE_COMMENT_TEXT})}),K&&!A&&P,J&&j.jsx(c("PolarisLikeButton.react"),{className:"_a9zu",isLiked:!!v,large:!1,onChange:a.$8})]})}),a.state.showUnhideDialog&&p&&j.jsx(c("PolarisUnhideCommentDialog.react"),{commentId:p,commentOwnerId:g,commentThreadId:i,onClose:a.$16,postId:w}),a.state.showCommentOptionsDialog&&p&&j.jsx(c("PolarisCommentOptionsDialog.react"),{canDeleteComment:!!H,commentId:p,commentOwnerAvatar:f,commentOwnerId:g,commentOwnerUsername:h,mediaOwnerId:x,onClose:a.$5,onDelete:a.$6}),a.state.showApproveCommentDialog&&p&&j.jsx(d("PolarisApproveCommentDialog.react").ApproveCommentDialog,{commentId:p,commentOwnerId:g,commentOwnerUsername:h,commentThreadId:i,onClose:a.$15,postId:w})]})}})};return b}(j.PureComponent);h.defaultProps={showRichComment:!1};function a(a,b){var e=b.commentOwnerId,f=b.postId,g=b.postOwnerId;e=d("PolarisuserSelectors").getUserById(a,e);f=d("PolarispostSelectors").getPostOrNullById(a,f);b=b.id;b==null&&(b=f==null?void 0:f.captionCommentId);return{commentOwnerAvatar:c("nullthrows")(e.profilePictureUrl),commentOwnerId:c("nullthrows")(e.id),commentOwnerUsername:c("nullthrows")(e.username),postOwnerIsUnpublished:d("PolarisuserSelectors").getUserById(a,g).isUnpublished,postShortcode:f&&f.code||null,viewerId:a.users.viewerId,translation:b?a.comments.translationById.get(b):null}}function b(a,b){var e={commentAuthorId:b.commentOwnerId,commentId:b.id,containerModule:b.analyticsContext,mediaAuthorId:b.postOwnerId,mediaId:b.id,mediaType:b.mediaType};return{fetchCommentLikes:function(){return a(d("PolarisCommentLikeListsActions").requestCommentLikes(c("nullthrows")(b.id)))},onDeleteComment:function(){return a(d("PolarisCommentActions").deleteComment(b.postId,b.id||""))},onLikeComment:function(b){return a(d("PolarisCommentActions").likeComment(babelHelpers["extends"]({},e,{userId:b||""})))},onLoggedOutIntentClick:function(b){a(d("PolarisNavigationActions").openLoggedOutIntentDialog(b))},onLoggedOutIntentClickLoginModal:function(b,c,e){var f=d("PolarisUA").isDesktop()||d("PolarisConfig").isNetzDGEligible()?"feature_wall":"content_wall";a(d("PolarisNavigationActions").openLoginModal(f,b,c,e,!0,b))},onReplyClick:function(e){return a(d("PolarisPendingCommentActions").changePendingComment(b.postId,"@"+(e||"")+" ",c("nullthrows")(b.commentThreadId),b.commentOwnerId,e))},onUnlikeComment:function(b){return a(d("PolarisCommentActions").unlikeComment(babelHelpers["extends"]({},e,{userId:b||""})))}}}function e(a,b,c){return babelHelpers["extends"]({},a,b,c,{onLikeComment:function(){return b.onLikeComment(a.viewerId)},onReplyClick:function(){return b.onReplyClick(a.commentOwnerUsername)},onUnlikeComment:function(){return b.onUnlikeComment(a.viewerId)}})}f=d("react-redux-wwwig").connect(a,b,e)(h);g["default"]=f}),98);
__d("PolarisCommentThread.react",["cx","fbt","PolarisIGCoreBox","PolarisIGCoreButton","PolarisIGCoreSpinner","PolarisInteractionsLogger","PolarisPaginationUtils","PolarisPostComment.react","PolarisPostVariants","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","PolariscommentReducer","PolarisisUserLoggedIn","nullthrows","react","react-redux-wwwig"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function k(a){var b=a.childComment,e=a.disableTimestampNav;a=a.parentProps;var f=a.analyticsContext,g=a.code,h=a.commentingDisabledForViewer,i=a.hideUserAvatar,k=a.loggedIn,l=a.onDeleteCommentClick,m=a.onLikeCountClick,n=a.onLikeModalClose,o=a.parentComment,p=a.postId,q=a.postOwnerId,r=a.reducedAvatarMargin,s=a.showCommentOptionsInline;a=a.showRemoveIcon;return j.jsx(c("PolarisPostComment.react"),{analyticsContext:f,className:"_a9ye",code:g,commentOwnerId:b.userId,commentThreadId:o.id,commentingDisabledForViewer:h,disableTimestampNav:e,hideUserAvatar:!!i,id:b.id,isAuthorVerified:b.isAuthorVerified,isRestrictedPending:b.isRestrictedPending,likeCount:b.likeCount,likedByViewer:b.likedByViewer,loggedIn:k,onDeleteCommentClick:l,onLikeCountClick:m,onLikeModalClose:n,postId:p,postOwnerId:q,postedAt:b.postedAt,reducedAvatarMargin:r,showCommentOptionsInline:s,showRemoveIcon:a,showRichComment:!0,text:b.text,variant:d("PolarisPostVariants").VARIANTS.flexible},b.id)}k.displayName=k.name+" [from "+f.id+"]";b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.state={hasPermalinkedReplyBeenHidden:!1},c.$3=function(a){var b=c.props,e=b.analyticsContext,f=b.childCommentsCacheCanShowMoreWithoutFetch,g=b.childCommentsIsFetching,h=b.hideReplies,i=b.loadChildComments,j=b.loadChildCommentsV2,k=b.onHidePermalinkReply,l=b.parentComment,m=l.id;l=l.userId;var n=b.permalinkedReply,o=b.postId,p=b.postOwnerId;b=b.showReplies;if(g)return;else a?(h(m),d("PolarisInteractionsLogger").logInteractionAction({eventName:"instagram_child_comments_collapse",commentAuthorId:l,commentId:m,containerModule:e,mediaAuthorId:p,mediaId:o}),n!=null&&(k!=null&&k(),c.setState({hasPermalinkedReplyBeenHidden:!0}))):f?b(m):d("PolarisisUserLoggedIn").isUserLoggedIn()?j(o,m):i(m)},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidUpdate=function(a,b){(a.parentComment.id!==this.props.parentComment.id||a.permalinkedReplyId!==this.props.permalinkedReplyId)&&this.setState({hasPermalinkedReplyBeenHidden:!1})};e.$1=function(){var a=this.props,b=a.childCommentsCacheCanShowMoreWithoutFetch,c=a.childCommentsCanFetchMorePagination,d=a.childCommentsHasNextPage,e=a.permalinkedReply;a=a.remainingCachedShowableChildCommentIds;return e!=null&&d===!0&&b===!0&&c!==!0&&a.count()===1&&a.get(0)===e.id};e.$2=function(a){var b=this.props.childCommentsHasNextPage;return b!==!0||a&&this.$1()};e.$4=function(a,b){var d=this,e=this.props,f=e.childCommentsIsFetching,g=e.replyPagerNodeRef;e=e.totalChildCommentCount;var h=this.$2(b),k=b?1:0;k=a+k;e=e-k;h&&!f?k=i._("Hide replies"):e<=0?k=i._("View replies"):k=i._("View replies ({hidden replies})",[i._param("hidden replies",e)]);return j.jsx("li",{className:"_a9yg",ref:g,children:j.jsxs(c("PolarisIGCoreBox"),{direction:"row",marginBottom:a>0?4:0,marginTop:b?2:0,children:[j.jsxs(c("PolarisIGCoreButton"),{borderless:!0,onClick:function(){return d.$3(h)},children:[j.jsx("div",{className:"_a9yh"}),j.jsx("span",{className:"_a9yi",children:k})]}),f&&j.jsx("div",{className:"_a9yj",children:j.jsx(c("PolarisIGCoreSpinner"),{size:"small"})})]})})};e.render=function(){var a=this,b=this.props,e=b.analyticsContext,f=b.code,g=b.commentingDisabledForViewer,h=b.customIndentationPadding,i=b.hideUserAvatar,l=b.innerRef,m=b.isPermalinkedComment,n=b.loggedIn,o=b.onDeleteCommentClick,p=b.onLikeCountClick,q=b.onLikeModalClose,r=b.parentComment,s=b.permalinkedReply,t=b.permalinkedReplyAnimating,u=b.permalinkedReplyId,v=b.permalinkedReplyNodeRef,w=b.postId,x=b.postOwnerId,y=b.reducedAvatarMargin,z=b.showCommentOptionsInline,A=b.showRemoveIcon,B=b.totalChildCommentCount;b=b.visibleChildComments;var C=this.state.hasPermalinkedReplyBeenHidden,D=null;s&&!(C&&b.count()===0)&&(D=j.jsx("div",{className:"_a9yk"+(t===!0&&!C?" _a9yl":""),ref:v,children:j.jsx(k,{childComment:s,disableTimestampNav:!0,parentProps:this.props})}));t=b.map(function(b,d){return D&&c("nullthrows")(s).id===b.id?null:j.jsx(k,{childComment:b,parentProps:a.props},d)}).filter(function(a){return a!=null});C=this.$4(t.count(),D!=null);v=h!=null?{margin:"12px 0 0 "+h+"px",width:"calc(100% - "+h+"px)"}:void 0;return j.jsxs("ul",{className:"_a9ym",ref:l,children:[j.jsx(c("PolarisPostComment.react"),{analyticsContext:e,code:f,commentOwnerId:r.userId,commentThreadId:r.id,commentingDisabledForViewer:g,disableTimestampNav:m===!0&&u==null,hideUserAvatar:!!i,id:r.id,isAuthorVerified:r.isAuthorVerified,isCovered:r.isCovered,isPermalinkedComment:m,isRestrictedPending:r.isRestrictedPending,likeCount:r.likeCount,likedByViewer:r.likedByViewer,loggedIn:n,onDeleteCommentClick:o,onLikeCountClick:p,onLikeModalClose:q,postId:w,postOwnerId:x,postedAt:r.postedAt,reducedAvatarMargin:y,showCommentOptionsInline:z,showRemoveIcon:A,showRichComment:!0,text:r.text,variant:d("PolarisPostVariants").VARIANTS.flexible}),B!==0&&j.jsx("li",{children:j.jsxs("ul",{className:"_a9yo",style:v,children:[D,C,t]})})]})};return b}(j.Component);function a(a,b){var c=b.parentComment;b=b.permalinkedReplyId;var e=d("PolarisThreadedCommentSelectors").selectChildCommentsForParentIdSplitByVisibility(a,c.id),f=e.remainingCachedShowableChildCommentIds;e=e.visibleChildComments;var g=d("PolarisThreadedCommentSelectors").getTotalChildCommentCountForParentId(a,c.id);c=a.threadedComments.childByParentId.get(c.id,d("PolariscommentReducer").EMPTY_POST_COMMENTS_STATE);c=c.pagination;var h=null;b!=null&&b!==""&&(h=a.comments.byId.get(b));return{childCommentsCacheCanShowMoreWithoutFetch:d("PolarisPaginationUtils").getVisibleCount(c)<d("PolarisPaginationUtils").getLoadedCount(c),childCommentsCanFetchMorePagination:d("PolarisPaginationUtils").canFetchMorePagination(c),childCommentsHasNextPage:d("PolarisPaginationUtils").hasNextPage(c),childCommentsIsFetching:d("PolarisPaginationUtils").isFetching(c),permalinkedReply:h,remainingCachedShowableChildCommentIds:f,totalChildCommentCount:g||0,visibleChildComments:e}}e={hideReplies:d("PolarisThreadedCommentActions").hideChildComments,loadChildComments:d("PolarisThreadedCommentActions").requestNextChildCommentPage,loadChildCommentsV2:d("PolarisThreadedCommentActions").requestNextChildCommentPageV2,showReplies:d("PolarisThreadedCommentActions").showChildComments};h=d("react-redux-wwwig").connect(a,e)(b);g["default"]=h}),98);
__d("PolarisDeleteCommentModal.react",["fbt","IGCoreDialog","PolarisCommentActions","PolarisGenericStrings","PolarisLogger","gkx","react","react-redux-wwwig"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.analyticsContext,e=a.commentId,f=a.onClose,g=a.postId,j=d("react-redux-wwwig").useDispatch();a=function(a){c("gkx")("2641")||d("PolarisLogger").logAction_DEPRECATED("commentDelete",{source:b}),j(d("PolarisCommentActions").deleteComment(g,e)),f(a)};return i.jsxs(d("IGCoreDialog").IGCoreDialog,{onModalClose:f,children:[i.jsx(d("IGCoreDialog").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:a,children:h._("Delete Comment")}),i.jsx(d("IGCoreDialog").IGCoreDialogItem,{onClick:f,children:d("PolarisGenericStrings").CANCEL_TEXT})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisNoCommentsPlaceholder.react",["fbt","PolarisIGCoreBox","PolarisIGCoreText","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){a=h._("No comments yet.");var b=h._("Start the conversation.");return i.jsxs(c("PolarisIGCoreBox"),{alignItems:"center",height:"100%",justifyContent:"center",children:[i.jsx(c("PolarisIGCoreBox"),{marginBottom:2,children:i.jsx(c("PolarisIGCoreText").Headline2,{weight:"semibold",children:a})}),i.jsx(c("PolarisIGCoreBox"),{marginTop:2,children:i.jsx(c("PolarisIGCoreText").Body,{weight:"light",children:b})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPreviewComments.react",["cx","fbt","PolarisBatchDOM","PolarisCommentActionTypes","PolarisCommentActions","PolarisConsumerBigNumber.react","PolarisIGCoreButton","PolarisIGCoreSpinner","PolarisInteractionsLogger","PolarisLinkBuilder","PolarisNavigationActions","PolarisPostComment.react","PolarisPostVariants","PolarisUA","PolariscommentSelectors","PolarispostSelectors","browserHistory","joinClasses","react","react-redux-wwwig"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$2=function(a){var b=c.props,e=b.analyticsContext,f=b.code,g=b.id,h=b.loadMore,i=b.loggedIn,j=b.mediaType,k=b.onLoggedOutIntentClick,l=b.ownerId;b=b.variant;var m=d("PolarisUA").isMobile();a.preventDefault();if(b===d("PolarisPostVariants").VARIANTS.feed||m){a=d("PolarisLinkBuilder").buildMediaCommentsLink(f,m);i?(d("browserHistory").browserHistory.push(a),d("PolarisInteractionsLogger").logInteractionAction({containerModule:e,eventName:"instagram_organic_comment_view_all",mediaAuthorId:l,mediaId:g,mediaType:j})):k("post_comment_view_all")}else h(g,f),d("PolarisInteractionsLogger").logInteractionAction({containerModule:e,eventName:"instagram_organic_comment_view_more",mediaAuthorId:l,mediaId:g,mediaType:j})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidUpdate=function(a,b,c){var e=this,f=a.commentSaveIsInFlight&&!this.props.commentSaveIsInFlight,g=this.$1;if(!g)return;d("PolarisBatchDOM").measure(function(){var b=g.scrollTop;f?b=g.scrollHeight:c!=null?b=g.scrollHeight-c:e.props.id!==a.id&&(b=0);d("PolarisBatchDOM").mutate(function(){g.scrollTop=b})})};e.getSnapshotBeforeUpdate=function(a){var b=a.comments,c=this.props.comments;if(a.id===this.props.id&&c&&b&&c.count()>b.count()){a=this.$1;if(a)return a.scrollHeight-a.scrollTop}return null};e.render=function(){var a=this,b=this.props,e=b.analyticsContext,f=b.captionAndTitle,g=b.captionIsEdited,h=b.className,i=b.commentsAreStacked,k=b.commentsDisabled,l=b.commentsHasNextPage,m=b.commentsTotalCount,n=b.handleDeleteCommentClick,o=b.id,p=b.loggedIn,q=b.mediaType,r=b.ownerId,s=b.postedAt,t=b.previewComments,u=b.showIGTVCaption,v=b.showRemoveCommentIcons,w=b.variant;b=k!==!0&&(l===!0||t!=null&&t.length<m);if((f==null||f==="")&&m===0&&!b)return null;l=t;return j.jsx("div",{className:c("joinClasses")("_acri"+(!d("PolarisUA").isMobile()&&w===d("PolarisPostVariants").VARIANTS.flexible&&!i?" _acrj":""),h),ref:function(b){return a.$1=b},children:j.jsxs("ul",{className:"_acrk",children:[f!=null&&f!==""&&j.jsx(c("PolarisPostComment.react"),{analyticsContext:e,commentOwnerId:r,isCaption:!0,isEdited:!!g,isRestrictedPending:!1,loggedIn:p,mediaType:q,postId:o,postOwnerId:r,postedAt:s,showIGTVCaption:u,showRemoveIcon:!1,text:f,variant:w},"captionAndTitle"),b&&this.renderLoadMoreCommentsLink(),k!==!0&&l&&l.map(function(a){return j.jsx(c("PolarisPostComment.react"),{analyticsContext:e,commentOwnerId:a.userId,id:a.id,isAuthorVerified:a.isAuthorVerified,isRestrictedPending:a.isRestrictedPending,likedByViewer:a.likedByViewer,loggedIn:p,mediaType:q,onDeleteCommentClick:n,postId:o,postOwnerId:r,postedAt:a.postedAt,showRemoveIcon:v,text:a.text,variant:w},a.id)})]})})};e.renderLoadMoreCommentsLink=function(){var a=this.props,b=a.comments,e=a.commentsIsFetching,f=a.commentsTotalCount;a=a.variant;var g=i._("Load more comments");b&&b.count()+d("PolarisCommentActionTypes").PAGE_SIZE>=f||a===d("PolarisPostVariants").VARIANTS.feed||d("PolarisUA").isMobile()?b=i._("View all {count} comments",[i._param("count",j.jsx(c("PolarisConsumerBigNumber.react"),{value:f}))]):b=g;return j.jsxs("li",{className:"_acrl",children:[j.jsx(c("PolarisIGCoreButton"),{borderless:!0,dangerouslySetClassName:{__className:"_acrm"},disabled:e,onClick:this.$2,children:b}),e&&j.jsx("div",{className:"_acrn",children:j.jsx(c("PolarisIGCoreSpinner"),{position:"static",size:"small"})})]})};return b}(j.PureComponent);function a(a,b){var c=d("PolariscommentSelectors").getPreviewCommentsForPostId(a,b.id);b=d("PolarispostSelectors").getNumCommentsForPostId(a,b.id);var e=a.navigation.pageIdentifier||"";return{analyticsContext:e,commentSaveIsInFlight:!1,commentsHasNextPage:!1,commentsIsFetching:!1,commentsTotalCount:b,previewComments:c,viewportWidth:a.displayProperties.viewportWidth}}e={onLoggedOutIntentClick:d("PolarisNavigationActions").openLoggedOutIntentDialog,loadMore:d("PolarisCommentActions").requestNextCommentPage};f=d("react-redux-wwwig").connect(a,e)(b);g["default"]=f}),98);
__d("PolarisIGCoreCircleAddPanoOutlineIcon",["PolarisIGCoreSVGIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs(c("PolarisIGCoreSVGIcon"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:[h.jsx("circle",{cx:"12.001",cy:"12.005",fill:"none",r:"10.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),h.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"7.001",x2:"17.001",y1:"12.005",y2:"12.005"}),h.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"12.001",x2:"12.001",y1:"7.005",y2:"17.005"})]}))}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);g["default"]=b}),98);
__d("PolarisThreadedCommentsLoadMoreButton.react",["fbt","PolarisIGCoreBox","PolarisIGCoreCircleAddPanoOutlineIcon","PolarisIGCoreSVGIconButton","PolarisIGCoreSpinner","PolarisUA","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=h._("Load more comments");function a(a){var b=function(b){var c=a.handleLoadMoreCommentsClick,e=a.loggedIn,f=a.onLoggedOutIntentClickLoginModal,g=a.url;b.preventDefault();!e&&d("PolarisUA").isDesktop()?f(g,"post_comment_view_all"):c(g)};return i.jsxs(c("PolarisIGCoreBox"),{justifyContent:"center",marginBottom:a.marginBottom,marginTop:a.marginTop,minHeight:40,position:"relative",children:[!a.commentsIsFetching&&i.jsx(c("PolarisIGCoreSVGIconButton"),{onClick:function(a){return b(a)},children:i.jsx(c("PolarisIGCoreCircleAddPanoOutlineIcon"),{alt:j})}),a.commentsIsFetching&&i.jsx(c("PolarisIGCoreSpinner"),{position:"absolute",size:"medium"})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisThreadedComments.react",["cx","PolarisBatchDOM","PolarisCommentThread.react","PolarisConfig","PolarisIGCoreBox","PolarisIGCoreSpinner","PolarisInteractionsLogger","PolarisLinkBuilder","PolarisNavigationActions","PolarisNoCommentsPlaceholder.react","PolarisPageTimings","PolarisPaginationUtils","PolarisPendingCommentState","PolarisPostComment.react","PolarisPostVariants","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","PolarisThreadedCommentsLoadMoreButton.react","PolarisUA","PolariscommentReducer","PolarisisUserLoggedIn","PolarisuserSelectors","cr:3443","gkx","nullthrows","react","react-redux-wwwig"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");h=d("react").Fragment;var j=(b=b("cr:3443"))!=null?b:h;function k(a,b){var c=b.getBoundingClientRect().top;c=c-b.scrollTop;b=a.getBoundingClientRect().top;return b-c}function l(a){var b=a.innerRef,d=a.isPermalinkedComment,e=a.onHidePermalinkReply,f=a.parentComment,g=a.parentProps,h=a.parentState,j=a.permalinkedReplyId,k=a.permalinkedReplyNodeRef;a=a.replyPagerNodeRef;var l=g.analyticsContext,m=g.code,n=g.commentingDisabledForViewer,o=g.customIndentationPadding,p=g.handleDeleteCommentClick,q=g.hideUserAvatar,r=g.id,s=g.isDeletingComments,t=g.loggedIn,u=g.onLikeCountClick,v=g.onLikeModalClose,w=g.ownerId,x=g.reducedAvatarMargin;g=g.showCommentOptionsInline;h=h.commentPermalinkAnimEnabled;return i.jsx(c("PolarisCommentThread.react"),{analyticsContext:l,code:m,commentingDisabledForViewer:n,customIndentationPadding:o,hideUserAvatar:q,innerRef:b,isPermalinkedComment:d,loggedIn:t,onDeleteCommentClick:p,onHidePermalinkReply:e,onLikeCountClick:u,onLikeModalClose:v,parentComment:f,permalinkedReplyAnimating:h,permalinkedReplyId:j,permalinkedReplyNodeRef:k,postId:r,postOwnerId:w,reducedAvatarMargin:x,replyPagerNodeRef:a,showCommentOptionsInline:g,showRemoveIcon:s})}l.displayName=l.name+" [from "+f.id+"]";b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$2=i.createRef(),c.$3=i.createRef(),c.$4=i.createRef(),c.$5=[],c.state={isAutoscrollingCommentPermalink:!1,commentPermalinkAnimEnabled:!1,replyPermalinkLastHideTime:null,showHiddenComments:!1},c.$13=function(a){a=c.props;var b=a.analyticsContext,e=a.code,f=a.hasRankedComments,g=a.id,h=a.loadMore,i=a.mediaType;a=a.ownerId;h(g,f,e);d("PolarisInteractionsLogger").logInteractionAction({containerModule:b,eventName:"instagram_child_comments_load_more",mediaAuthorId:a,mediaId:g,mediaType:i})},c.$14=function(){c.setState({showHiddenComments:!0})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.$6=function(){return this.$2.current||null};e.$7=function(){return this.$3.current||null};e.$8=function(){return this.$4.current||null};e.$9=function(a,b,c,e){var f=this;this.setState({isAutoscrollingCommentPermalink:!0,commentPermalinkAnimEnabled:!1});d("PolarisBatchDOM").measure(function(){var g,h=k(b,a);if(c){var i=k(c,a),j=c.getBoundingClientRect().height,l=a.getBoundingClientRect().height;l=Math.max(l-j,0);g=Math.max(h,i-l)}else g=h;d("PolarisBatchDOM").mutate(function(){a.scrollTop=g;var b=function(){f.setState({isAutoscrollingCommentPermalink:!1,commentPermalinkAnimEnabled:!0})};e?d("PolarisPageTimings").onPageTimingsAvailable(function(){b()}):b()})})};e.componentDidMount=function(){var a=this.$1;if(!a)return;var b=this.$6();if(b)this.$9(a,b,this.$7(),!0);else if(!this.props.hasRankedComments){if(d("PolarisUA").isDesktop())return;a.scrollTop=a.scrollHeight}};e.componentDidUpdate=function(a,b,c){var d=this.$1;if(!d)return;var e=this.$6();if(e)if(this.state.isAutoscrollingCommentPermalink)return;else if(this.props.permalinkedCommentId!==a.permalinkedCommentId||this.props.permalinkedReplyId!==a.permalinkedReplyId||this.props.permalinkedComment!==a.permalinkedComment){this.$9(d,e,this.$7(),!1);return}this.$10(a,b,c,d,e)};e.$10=function(a,b,c,e,f){var g=this,h=a.commentSaveIsInFlight&&!this.props.commentSaveIsInFlight;c=c||{};var i=c.newCommentCachedOffset,j=a.id===this.props.id&&a.permalinkedCommentId===this.props.permalinkedCommentId&&a.permalinkedReplyId===this.props.permalinkedReplyId&&b.replyPermalinkLastHideTime!==this.state.replyPermalinkLastHideTime,k=this.$8();h&&!a.commentWasReply&&(this.$5[0]&&this.$5[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}));d("PolarisBatchDOM").measure(function(){var b=null;h&&!a.commentWasReply&&!g.props.hasRankedComments?b=e.scrollHeight:i!=null?b=e.scrollHeight-i:j&&f&&k&&(b=g.$11(e,f,k));d("PolarisBatchDOM").mutate(function(){b!=null&&(e.scrollTop=b)})})};e.$11=function(a,b,c){c=k(c,a);b=k(b,a);var d=6;c=Math.max(c-d,b);return a.scrollTop>c?c:null};e.getSnapshotBeforeUpdate=function(a,b){b=a.comments;var c=this.props.comments,d=this.$1;return d&&a.id===this.props.id&&c.count()>b.count()&&!this.props.hasRankedComments?{newCommentCachedOffset:d.scrollHeight-d.scrollTop}:null};e.$12=function(){this.setState({replyPermalinkLastHideTime:new Date().valueOf()})};e.render=function(){var a=this,b=this.props,e=b.analyticsContext,f=b.captionAndTitle,g=b.captionCreatedAt,h=b.captionIsEdited,k=b.className,m=b.commentCoverSeenCounter,n=b.comments,o=b.commentsDisabled,p=b.commentsHasNextPage,q=b.disableScroll,r=b.hasCoveredComments,s=b.hasRankedComments,t=b.hideUserAvatar,u=b.id,v=b.initialCommentsLoading,w=b.isOwnerVerified,x=b.loggedIn,y=b.mediaType,z=b.ownerId,A=b.permalinkedComment,B=b.permalinkedReplyId,C=b.postedAt,D=b.reducedAvatarMargin,E=b.showCommentOptionsInline,F=b.showIGTVCaption;b=b.showPagerBelowComments;p=o!==!0&&Boolean(p);v=v&&n.size===0;if((f==null||f==="")&&n.count()===0&&!p&&!v)return d("PolarisUA").isDesktop()?i.jsx("div",{className:k,children:i.jsx(c("PolarisNoCommentsPlaceholder.react"),{})}):i.jsx("div",{className:k});var G=null,H=null,I=null;!v&&o!=null&&(G=A?i.jsx("div",{className:"_a9z3"+(this.state.commentPermalinkAnimEnabled&&!B?" _a9yl":""),ref:this.$2,children:i.jsx(l,{isPermalinkedComment:!0,onHidePermalinkReply:function(){return a.$12()},parentComment:A,parentProps:this.props,parentState:this.state,permalinkedReplyId:B,permalinkedReplyNodeRef:this.$3,replyPagerNodeRef:this.$4})}):null,H=n.map(function(b,d){if(A&&b.id===A.id)return null;return c("gkx")("3006")&&b.isCovered===!0?null:i.jsx(l,{innerRef:function(b){return a.$5[d]=b},parentComment:b,parentProps:a.props,parentState:a.state},d)}).filter(function(a){return!!a}),I=n.filter(function(a){return a.isCovered===!0}).map(function(b,c){return i.jsx(l,{innerRef:function(b){return a.$5[c]=b},parentComment:b,parentProps:a.props,parentState:a.state},c)}));o=null;f!=null&&f!==""&&(o=i.jsx(c("PolarisPostComment.react"),{analyticsContext:e,captionCreatedAt:g,className:(d("PolarisUA").isMobile()?"_a9z4":"")+" _a9z5",commentOwnerId:z,hideUserAvatar:!!t,isAuthorVerified:!!w,isCaption:!0,isEdited:!!h,isRestrictedPending:!1,loggedIn:x,mediaType:y,postId:u,postOwnerId:z,postedAt:c("nullthrows")(C),reducedAvatarMargin:D,showCommentOptionsInline:E,showIGTVCaption:F,showRemoveIcon:!1,showRichComment:!0,text:f,variant:d("PolarisPostVariants").VARIANTS.flexible},"captionAndTitle"));B=p&&this.renderLoadMoreCommentsLink(G!=null);n=s||b===!0;return i.jsx("div",{className:k,children:i.jsxs("ul",{className:"_a9z6"+(q?" _a9z7":"")+(G!==null?" _a9z8":"")+(o===null?" _a9z9":"")+(!B||n?" _a9za":""),ref:function(b){return a.$1=b},children:[o,G,v?i.jsx(c("PolarisIGCoreBox"),{direction:"row",justifyContent:"center",children:i.jsx(c("PolarisIGCoreSpinner"),{})}):null,!n&&B,!d("PolarisConfig").isNetzDGEligible()&&H,n&&B,!B&&r&&!this.state.showHiddenComments&&i.jsx(j,{nuxSeenCounter:m,onClick:this.$14}),c("gkx")("3006")===!0&&this.state.showHiddenComments&&I]})})};e.renderLoadMoreCommentsLink=function(a){var b=this.props,e=b.code,f=b.commentsIsFetching,g=b.hasRankedComments,h=b.loggedIn;b=b.onLoggedOutIntentClickLoginModal;e=d("PolarisLinkBuilder").buildMediaCommentsLink(c("nullthrows")(e),d("PolarisUA").isMobile());var j;g?(g=0,j=0):a?(g=2,j=2):(g=0,j=4);return i.jsx("li",{children:i.jsx(c("PolarisThreadedCommentsLoadMoreButton.react"),{commentsIsFetching:f,handleLoadMoreCommentsClick:this.$13,loggedIn:h,marginBottom:j,marginTop:g,onLoggedOutIntentClickLoginModal:b,url:e})})};return b}(i.PureComponent);function a(a,b){var c=b.id,e=b.ownerId;b=b.permalinkedCommentId;var f=d("PolarisThreadedCommentSelectors").getThreadedCommentsLoading(a,c),g=d("PolarisThreadedCommentSelectors").selectVisibleParentCommentsForPostId(a,c),h=a.threadedComments.parentByPostId.get(c,d("PolariscommentReducer").EMPTY_POST_COMMENTS_STATE),i=h.count;h=h.pagination;c=a.pendingComments.get(c,d("PolarisPendingCommentState").EMPTY_PENDING_COMMENT);var j=null;!f&&b!=null&&b!==""&&(j=a.comments.byId.get(b));return{commentCoverSeenCounter:a.comments.commentCoverSeenCounter,commentWasReply:c.repliedToCommentId!=null,commentSaveIsInFlight:c.committing,comments:g,commentsHasNextPage:d("PolarisPaginationUtils").hasNextPage(h),commentsIsFetching:d("PolarisPaginationUtils").isFetching(h),commentsTotalCount:i!=null?i:0,hasCoveredComments:g.some(function(a){return a.isCovered===!0}),isOwnerVerified:d("PolarisuserSelectors").getUserById(a,e).isVerified,initialCommentsLoading:f,permalinkedComment:j}}function e(a){return{loadMore:function(b,c,e){d("PolarisisUserLoggedIn").isUserLoggedIn()?a(d("PolarisThreadedCommentActions").requestNextParentCommentPageV2(b,c,e)):a(d("PolarisThreadedCommentActions").requestNextParentCommentPage(b,c,e))},onLoggedOutIntentClickLoginModal:function(b,c){a(d("PolarisNavigationActions").openLoginModal("feature_wall",b,c,null,!0,b))}}}h=d("react-redux-wwwig").connect(a,e)(b);g["default"]=h}),98);
__d("PolarisPostComments.react",["PolarisDeleteCommentModal.react","PolarisPostRemoveCommentsSelectors","PolarisPostVariants","PolarisPreviewComments.react","PolarisThreadedComments.react","PolarisUA","PolarisuserSelectors","nullthrows","react","react-redux-wwwig"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={commentToDeleteId:null,showDeleteCommentModal:!1},c.$1=function(a){c.setState({commentToDeleteId:a,showDeleteCommentModal:!0})},c.$2=function(){c.setState({commentToDeleteId:null,showDeleteCommentModal:!1})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.$3=function(){var a=this.props,b=a.caption,c=a.showIGTVCaption;a=a.title;return c?[a,b].filter(Boolean).join("\n\n"):b};e.$4=function(){return this.props.variant!==d("PolarisPostVariants").VARIANTS.feed&&!d("PolarisUA").isMobile()};e.render=function(){var a=this.props,b=a.analyticsContext,d=a.captionCreatedAt,e=a.captionIsEdited,f=a.className,g=a.code,i=a.commentingDisabledForViewer,j=a.commentsAreStacked,k=a.commentsDisabled,l=a.customIndentationPadding,m=a.hasRankedComments,n=a.hideUserAvatar,o=a.id,p=a.mediaType,q=a.onLikeCountClick,r=a.onLikeModalClose,s=a.ownerId,t=a.permalinkedCommentId,u=a.permalinkedReplyId,v=a.postedAt,w=a.reducedAvatarMargin,x=a.showCommentOptionsInline,y=a.showIGTVCaption,z=a.showRemoveCommentIcons,A=a.variant;a=a.viewerId;a=a!=null;return h.jsxs(h.Fragment,{children:[this.$4()?h.jsx(c("PolarisThreadedComments.react"),{analyticsContext:b,captionAndTitle:this.$3(),captionCreatedAt:d,captionIsEdited:e,className:f,code:g,commentingDisabledForViewer:i,commentsDisabled:k,customIndentationPadding:l,handleDeleteCommentClick:this.$1,hasRankedComments:m,hideUserAvatar:!!n,id:o,isDeletingComments:z,loggedIn:a,mediaType:p,onLikeCountClick:q,onLikeModalClose:r,ownerId:s,permalinkedCommentId:t,permalinkedReplyId:u,postedAt:v,reducedAvatarMargin:w,showCommentOptionsInline:x,showIGTVCaption:y}):h.jsx(c("PolarisPreviewComments.react"),{captionAndTitle:this.$3(),captionIsEdited:e,className:f,code:g,commentsAreStacked:j,commentsDisabled:k,handleDeleteCommentClick:this.$1,id:o,loggedIn:a,mediaType:p,ownerId:s,postedAt:v,showIGTVCaption:y,showRemoveCommentIcons:z,variant:A}),this.state.showDeleteCommentModal&&h.jsx(c("PolarisDeleteCommentModal.react"),{analyticsContext:b,commentId:c("nullthrows")(this.state.commentToDeleteId),onClose:this.$2,postId:o})]})};return b}(h.PureComponent);b.defaultProps={variant:d("PolarisPostVariants").VARIANTS.flexible};function a(a,b){return{showRemoveCommentIcons:d("PolarisPostRemoveCommentsSelectors").getPostRemoveCommentsIsVisible(a),viewerId:(b=d("PolarisuserSelectors").getViewer(a))==null?void 0:b.id}}e=d("react-redux-wwwig").connect(a)(b);g["default"]=e}),98);